<!DOCTYPE html>
<html>
  <head>
    <style>
    header {
        background-color: lightyellow;
        border-style: outset;
      }
      footer {
          background-color: lightblue;
          border-style: outset;
      }
      .section {
        background-color: lightblue;
        border-style: outset;
      }
      .part {
        background-color: lightblue;
        border-style: inset;
      }
    </style>
    <title>
      NEWS
    </title>
  </head>
  <body>
    <div id="lock">
  Justin Fu has enforced a lock on this site to prevent unauthorized people snooping around in private news. <a href="https://justin226.github.io/news/login">Sign in</a> to continue, or enter the password.
  <input type="password" id="password">
  <input type="submit" id="unlock" value="Submit">
  <span style="color: red" id="unlockable"></span>
</div>
    <header id="h">
    <button id="logout" style="display: none">Logout</button>
    </header>
    <h1>Private News</h1>
    <div id="game" class="section" style="display: none">
      <p>"I farted.<br>It [tickled].<br>My butt[cheeks] giggled<br>It was hot it<br> was burning<br>so I did it<br>again"<br><em>-Gisselle Perez, 5th Grader</em><br>Monday December 9th, 2019</p>
    </div>
    <script>
      if(getCookie("user") == "justin226"){
        document.getElementById("lock").style.display = "none";
    document.getElementById("game").style.display = "block";
    document.getElementById("password").value = "";
    document.getElementById("unlockable").innerHTML = "";
        document.getElementById("logout").style.display = "block";
      }
      if(getCookie("user") == "justin226"||getCookie("user") == "user"){
        document.getElementById("h").innerHTML = "Welcome, " + getCookie("user");
        document.getElementById("logout").style.display = "block";
      }
      document.getElementById("logout").addEventListener("click", function(){
        document.cookie = "user=Somebody";
        location.reload();
      });
      checkLock();
function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function checkLock(){
  c = getCookie("user");
  var m = getCookie("locked");
  if(c == "justin226"||m == "false"){
    document.getElementById("lock").style.display = "none";
    document.getElementById("game").style.display = "block";
    document.getElementById("password").value = "";
    document.getElementById("unlockable").innerHTML = "";
  }
  else{
    document.getElementById("game").style.display = "none";
    document.getElementById("lock").style.display = "block";
  }
}
document.getElementById("unlock").addEventListener("click", function(){
  if(document.getElementById("password").value === "jFu090226"){
    document.getElementById("game").style.display = "block";
    document.getElementById("lock").style.display = "none";
    document.cookie = "locked=false";
    document.getElementById("password").value = "";
    document.getElementById("unlockable").innerHTML = "";
  }
  else{
    document.getElementById("unlockable").innerHTML = "Wrong";
  }
});

    </script>
  </body>
</html>
